  .options .opt-row {
    display: grid;
    grid-template-columns: repeat(6, minmax(160px, 1fr));
    gap: 12px;
    align-items: end;
  }
  .field .lbl {
    font-size: 12px;
    color: #4b5563;
    margin-bottom: 4px;
  }
  .field .ctl select,
  .field .ctl input[type="date"] {
    width: 100%;
    padding: 8px 10px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
  }
  .field.inline {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .field.sm {
    max-width: 140px;
  }

  .c {
    text-align: center;
  }
  .r {
    text-align: right;
  }
  .link {
    color: #2563eb;
    cursor: default;
  }
  .group-head td {
    background: #eef2ff;
    font-weight: 600;
  }
  .debtor td {
    background: #fff;
  }
  .toggle {
    width: 36px;
  }
  .toggle-btn {
    width: 28px;
    height: 28px;
    border: 1px solid #e5e7eb;
    background: #fff;
    border-radius: 8px;
    cursor: pointer;
  }
  .detail-wrap {
    padding: 8px 0;
  }
  .detail {
    width: 100%;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
  }
  .detail thead th {
    background: #f8fafc;
    padding: 8px;
    border-bottom: 1px solid #e5e7eb;
  }
  .detail td {
    padding: 8px;
    border-bottom: 1px solid #f1f5f9;
  }
  .arrow {
    margin-left: 6px;
    font-size: 12px;
    color: #64748b;
  }
  /* Detail row full-width + n·ªÅn v√†ng nh·∫°t */
  /* ‚úÖ Ch·ªâ h√†ng <tr> detail m√†u v√†ng */
  .detail-row,
  .detail-row > td {
    background: #f7f4e1; /* v√†ng nh·∫°t ch·ªâ ƒë√∫ng h√†ng detail */
  }

  /* b·ªè n·ªÅn v√†ng c·ªßa wrapper n·∫øu tr∆∞·ªõc ƒë√≥ ƒë√£ set */
  .detail-wrap.full {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 8px 12px; /* c√≥/kh√¥ng tu·ª≥ b·∫°n, ƒë·ªÉ n·ªôi dung ƒë·ª° s√°t */
  }

  .detail-row .detail thead th,
  .detail-row .detail td {
    background: #fff; /* tr·∫Øng to√†n b·ªô √¥ trong b·∫£ng detail */
    border-bottom: 1px solid #f3efd9;
  }
  /* 1) Kh√¥ng t√¥ n·ªÅn v√†ng cho c·∫£ h√†ng wrap c·ªßa detail */
  .detail-row,
  .detail-row > td {
    background: transparent !important; /* b·ªè n·ªÅn v√†ng to√†n h√†ng */
    padding: 0; /* s√°t khung b·∫£ng detail */
    border-top: none;
  }

  /* 2) Khung b·∫£ng detail v·∫´n tr·∫Øng + vi·ªÅn nh·∫π */
  .detail-row .detail {
    width: 100%;
    background: #fff; /* n·ªÅn tr·∫Øng cho b·∫£ng detail */
    border: 1px solid #fde68a;
    border-radius: 8px;
  }

  /* 3) Header c·ªßa b·∫£ng detail: n·ªÅn tr·∫Øng */
  .detail-row .detail thead th {
    background: #fff !important;
  }

  /* 4) ‚úÖ Ch·ªâ c√°c <tr> n·ªôi dung (tbody) m√†u v√†ng */
  .detail-row .detail tbody tr {
    background: #fff3b5; /* v√†ng nh·∫°t cho t·ª´ng h√†ng n·ªôi dung */
  }

  /* (tu·ª≥ ch·ªçn) ph√¢n bi·ªát h√†ng ch·∫µn/l·∫ª nh·∫π nh√†ng */
  .detail-row .detail tbody tr:nth-child(even) {
    background: #fff3b5;
  }

  /* gi·ªØ m√†u ch·ªØ c·ªßa link ch·ª©ng t·ª´ */
  /* === Subtable (detail) look & feel === */
  /* Khung ngo√†i gi·ªëng b·∫£ng cha */
  .detail-row .detail {
    --bd: #e5e7eb; /* m√†u vi·ªÅn (same table parent) */
    --head: #f3f4f6; /* n·ªÅn header (same table parent) */
    background: #fff;
    border: 1px solid var(--bd);
    border-radius: 8px;
    overflow: hidden; /* ƒë·ªÉ bo g√≥c header */
    margin-top: 8px;
  }

  /* C·∫•u tr√∫c b·∫£ng gi·ªëng cha */
  .detail-row .detail table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0; /* gi·ªëng cha: kh√¥ng kho·∫£ng c√°ch vi·ªÅn */
    table-layout: auto;
  }

  /* Header c·ªßa b·∫£ng detail: n·ªÅn & font gi·ªëng cha */
  .detail-row .detail thead th {
    background: var(--head) !important;
    color: #111827;
    font-weight: 600;
    padding: 10px 12px;
    border-bottom: 1px solid var(--bd);
    white-space: nowrap;
  }

  /* Cell c·ªßa b·∫£ng detail: padding & ƒë∆∞·ªùng k·∫ª gi·ªëng cha */
  .detail-row .detail tbody td {
    padding: 10px 12px;
    border-top: 1px solid var(--bd);
  }

  /* Vi·ªÅn d·ªçc m·∫£nh gi·ªëng grid c·ªßa b·∫£ng cha (n·∫øu cha c√≥) */
  .detail-row .detail thead th + th,
  .detail-row .detail tbody td + td {
    border-left: 1px solid var(--bd);
  }

  /* Bo g√≥c tr√™n c√πng cho 2 cell ƒë·∫ßu/cu·ªëi header (nh∆∞ cha) */
  .detail-row .detail thead th:first-child {
    border-top-left-radius: 8px;
  }
  .detail-row .detail thead th:last-child {
    border-top-right-radius: 8px;
  }

  /* Gi·ªØ m√†u v√†ng CH·ªà cho c√°c h√†ng n·ªôi dung */
  .detail-row .detail tbody tr {
    background: #fff7cc;
  }
  .detail-row .detail tbody tr:nth-child(even) {
    background: #fff3b5;
  }

  .detail-row .detail tbody a:hover {
    text-decoration: underline;
  }

  /* D·∫πp n·ªÅn v√†ng to√†n h√†ng b·ªçc detail (ch·ªâ gi·ªØ cho tr n·ªôi dung) */
  .detail-row,
  .detail-row > td {
    background: transparent !important;
    padding: 0;
    border-top: none;
  }
  .options {
    padding: 10px 12px;
    border-bottom: 1px solid #eef2f7;
    background: #f8fbff;
  }
  .opt-grid {
    display: grid;
    grid-template-columns: 2fr 2fr 1fr;
    gap: 12px;
  }
  /* Responsive: 2 √¥/row khi m√†n < 1280px */
  @media (max-width: 1280px) {
    .opt-grid fieldset > label,
    .opt-grid fieldset > .field {
      grid-column: span 6;
    }
  }

  /* 1 √¥/row khi m√†n < 640px (mobile) */
  @media (max-width: 640px) {
    .opt-grid fieldset > label,
    .opt-grid fieldset > .field {
      grid-column: span 12;
    }
  }
  .filters {
    width: 100%;
    background: #f8fafc; /* n·ªÅn nh·∫π */
    border-radius: 12px;
    padding: 12px 16px;
    display: grid;
    grid-template-columns: repeat(12, minmax(0, 1fr));
    gap: 12px;
    align-items: start;
    border: 1px solid #eef2f7; /* vi·ªÅn m·∫£nh */
  }
  .filters .f {
    grid-column: span 2; /* 4 √¥/row tr√™n m√†n r·ªông */
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  /* Header b·∫£ng detail v·∫´n m√†u gi·ªëng b·∫£ng cha */
  .grid.detail-yellow thead th {
    background-color: #f6f8fb;
  }

  /* Ch·ªâ c√°c h√†ng n·ªôi dung trong detail c√≥ n·ªÅn v√†ng nh·∫°t */
  .grid.detail-yellow tbody tr > td {
    background-color: #fff7cc !important; /* v√†ng nh·∫°t */
  }

  /* (tu·ª≥ ch·ªçn) zebra cho d·ªÖ nh√¨n */
  .grid.detail-yellow tbody tr:nth-child(even) > td {
    background-color: #fff3b0 !important;
  }

  /* (tu·ª≥ ch·ªçn) hover nh·∫π ƒë·ªÉ ph√¢n bi·ªát */
  .grid.detail-yellow tbody tr:hover > td {
    background-color: #ffefb5 !important;
  }

  .options {
    padding: 10px 12px;
    border-bottom: 1px solid #eef2f7;
    background: #f8fbff;
  }
  .opt-grid {
    display: grid;
    grid-template-columns: 2fr 2fr 1fr;
    gap: 12px;
  }
  fieldset {
    border: 1px solid #d7deea;
    border-radius: 8px;
    padding: 10px;
    background: #fff;
  }
  legend {
    padding: 0 6px;
    color: #0f2c61;
    font-weight: 800;
  }
  label {
    display: flex;
    flex-direction: column;
    gap: 6px;
    font-weight: 600;
    color: #334155;
  }
  input,
  select {
    border: 1px solid #d7deea;
    border-radius: 8px;
    padding: 6px 8px;
    height: 34px;
  }
  label.chk {
    flex-direction: row;
    align-items: center;
    gap: 8px;
    font-weight: 600;
  }
  label.chk input {
    height: auto;
  }
  .r {
    text-align: right;
  }
  .c {
    text-align: center;
  }

  tbody.group-head td {
    background: #f0f7ff;
    color: #0f2c61;
    font-weight: 800;
    border-top: 1px solid #d7e6ff;
  }
  tbody.group-total td {
    background: #fafcff;
    border-top: 1px solid #eef2f7;
  }

  .totals {
    padding: 8px 12px 16px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    align-items: flex-end;
  }
  .totals .row {
    display: flex;
    gap: 24px;
    min-width: 320px;
    justify-content: space-between;
    color: #0f2c61;
  }
  .totals .row strong {
    font-weight: 800;
  }
  .previewbox {
    padding: 10px 12px;
  }
  .criteria {
    margin-top: 6px;
    color: #475569;
    background: #f8fafc;
    border: 1px dashed #d7deea;
    padding: 8px;
    border-radius: 8px;
  }

  @media (max-width: 1024px) {
    .opt-grid {
      grid-template-columns: 1fr;
    }
  }
  .page {
    background: #fff;
  }
  .titlebar {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .toolbar .btn {
    margin-left: 0.5rem;
  }
  .options .opt-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(260px, 1fr));
    gap: 16px;
  }
  fieldset {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 12px 12px 10px;
  }
  .debtor-filter {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .debtor-filter .range input {
    width: 130px;
  }
  .debtor-filter .multi {
    min-width: 260px;
    min-height: 100px;
  }
  .table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
  }
  .table th,
  .table td {
    padding: 10px 12px;
    border-bottom: 1px solid #edf1f4;
  }
  .table td.r,
  .table th.r {
    text-align: right;
  }
  .table td.c,
  .table th.c {
    text-align: center;
  }

  tfoot tr.sum {
    background: #f8fafc;
    font-weight: 600;
  }
  .group-head tr {
    background: #f3f4f6;
  }
  .group-total tr {
    background: #f8fafc;
  }
  .previewbox {
    margin-top: 16px;
    padding: 12px;
    border: 1px dashed #d1d5db;
    border-radius: 8px;
  }
  .sum-row {
    background: #fafafa;
  }
  .sum-row td {
    padding-top: 10px;
    border-top: 1px solid #eee;
  }
  .r {
    text-align: right;
  }
  /* canh top hai control trong d√≤ng Debtor */
  .debtor-line {
    display: flex;
    gap: 12px;
    align-items: flex-start; /* üîù quan tr·ªçng */
  }

  /* t√πy ch·ªçn: set k√≠ch th∆∞·ªõc cho ƒë·∫πp */
  .debtor-mode {
    height: 38px;
  } /* b·∫±ng chi·ªÅu cao input th∆∞·ªùng */
  .debtor-multi {
    height: 120px;
  }
  th {
    user-select: none;
  }
  th[ng-reflect-ng-class],
  th[ng-reflect-ng-class] .arrow,
  th.sorted {
    cursor: pointer;
  }
  th.sorted {
    text-decoration: underline;
  }
  th.sorted.desc .arrow {
    transform: rotate(180deg);
  }
  .arrow {
    margin-left: 4px;
    font-size: 12px;
  }
  /* --- Options area full width & equal columns --- */
  .options {
    width: 100%;
  }

  .opt-grid fieldset {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(12, minmax(0, 1fr)); /* 12 c·ªôt chu·∫©n */
    gap: 12px;
    border: 0; /* n·∫øu mu·ªën b·ªè khung */
    padding: 0;
    margin: 0;
  }

  /* M·∫∑c ƒë·ªãnh m·ªói control chi·∫øm 3 c·ªôt = 4 √¥/row tr√™n m√†n r·ªông */
  .opt-grid fieldset > label,
  .opt-grid fieldset > .field {
    display: flex;
    flex-direction: column;
    gap: 6px;
    grid-column: span 3;
  }

  /* T·ª± full chi·ªÅu ngang c·ªßa √¥ */
  .opt-grid fieldset input,
  .opt-grid fieldset select {
    width: 100%;
  }

  /* Debtor line: select + range/multi n·∫±m c√πng h√†ng, canh top */
  .debtor-line {
    display: flex;
    align-items: flex-start;
    gap: 8px;
  }
  .debtor-line .w-44 {
    max-width: 200px;
  } /* dropdown "Debtor mode" */
  .debtor-line .range input {
    width: 140px;
  } /* From/To code */
  .debtor-multi {
    width: 100%;
    min-height: 120px;
  }

  /* Responsive: 2 √¥/row khi m√†n < 1280px */
  @media (max-width: 1280px) {
    .opt-grid fieldset > label,
    .opt-grid fieldset > .field {
      grid-column: span 6;
    }
  }

  /* 1 √¥/row khi m√†n < 640px (mobile) */
  @media (max-width: 640px) {
    .opt-grid fieldset > label,
    .opt-grid fieldset > .field {
      grid-column: span 12;
    }
  }
  /* ===== Filter bar ===== */
  .filters {
    width: 100%;
    background: #f8fafc; /* n·ªÅn nh·∫π */
    border-radius: 12px;
    padding: 12px 16px;
    display: grid;
    grid-template-columns: repeat(12, minmax(0, 1fr));
    gap: 12px;
    align-items: start;
    border: 1px solid #eef2f7; /* vi·ªÅn m·∫£nh */
  }

  .filters .f {
    grid-column: span 2; /* 4 √¥/row tr√™n m√†n r·ªông */
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  @media (max-width: 1200px) {
    .filters .f {
      grid-column: span 6;
    } /* 2 √¥/row */
  }
  @media (max-width: 640px) {
    .filters .f {
      grid-column: span 12;
    } /* 1 √¥/row */
  }

  .lbl {
    font-size: 12px;
    font-weight: 600;
    color: #4b5563;
  }

  .ctl select,
  .ctl input {
    height: 36px;
    width: 100%;
    padding: 0 12px;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    background: #fff;
  }
  .ctl select:focus,
  .ctl input:focus {
    outline: 0;
    border-color: #34c759;
    box-shadow: 0 0 0 3px rgba(52, 199, 89, 0.15);
  }

  /* icon nh·ªè b√™n tr√°i (cho Date) */
  .icon-left {
    position: relative;
  }
  .icon-left input {
    padding-left: 38px;
  }
  .icon-left::before {
    content: "";
    position: absolute;
    left: 12px;
    top: 50%;
    width: 18px;
    height: 18px;
    transform: translateY(-50%);
    opacity: 0.6;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%2399A3AD" viewBox="0 0 24 24"><path d="M7 2a1 1 0 0 1 1 1v1h8V3a1 1 0 1 1 2 0v1h1a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1V3a1 1 0 1 1 2 0v1zm12 6H5v11h14V8z"/></svg>')
      no-repeat center/18px;
  }

  /* N√∫t toolbar s·∫µn c√≥ c√≥ th·ªÉ gi·ªØ nguy√™n; n·∫øu c·∫ßn tr√πng tone: */
  .segment {
    display: inline-flex;
    gap: 6px;
    margin-bottom: 8px;
  }
  .segment button {
    height: 30px;
    padding: 0 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    background: #fff;
    cursor: pointer;
  }
  .segment button.on {
    background: #34c759;
    border-color: #34c759;
    color: #fff;
  }
  /* Item full-width trong grid */
  .filters .gfull {
    grid-column: 1 / -1;
  }

  /* H√†ng n√∫t actions */
  .filters .actions {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 10px;
    padding-top: 4px;
  }
  /* ===== Grid lines cho b·∫£ng ch√≠nh (non-grouped) ===== */
.gridwrap > table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}
.gridwrap > table thead th {
  font-weight: 600;
  padding: 10px 12px;
  border-bottom: 1px solid #edf1f4;      /* k·∫ª ngang header */
}
.gridwrap > table thead th:first-child { border-top-left-radius: 8px; }
.gridwrap > table thead th:last-child  { border-top-right-radius: 8px; }

.gridwrap > table tbody td,
.gridwrap > table tfoot td {
  padding: 10px 12px;
  border-bottom: 1px solid #edf1f4;      /* k·∫ª ngang body + footer */
}
/* k·∫ª d·ªçc cho t·∫•t c·∫£ c·ªôt tr·ª´ c·ªôt ƒë·∫ßu */
.gridwrap > table thead th + th,
.gridwrap > table tbody td + td,
.gridwrap > table tfoot td + td {
  border-left: 1px solid #edf1f4;
}

/* ===== Grid lines cho b·∫£ng grouped (.table) ƒë·ªÉ ƒë·ªìng b·ªô look & feel ===== */
.table thead th,
.table tbody td,
.table tfoot td {
  padding: 10px 12px;
  border-bottom: 1px solid #edf1f4;      /* k·∫ª ngang */
}
.table thead th + th,
.table tbody td + td,
.table tfoot td + td {
  border-left: 1px solid #edf1f4;        /* k·∫ª d·ªçc */
}

/* ===== TƒÉng l∆∞·ªõi cho b·∫£ng detail v√†ng nh·∫°t (n·∫øu mu·ªën r√µ h∆°n) ===== */
.grid.detail-yellow thead th + th,
.grid.detail-yellow tbody td + td {
  border-left: 1px solid #e5e7eb;        /* k·∫ª d·ªçc detail */
}
.grid.detail-yellow tbody td {
  border-bottom: 1px solid #e5e7eb;      /* k·∫ª ngang detail */
}

/* B·∫£ng th∆∞·ªùng */
:host .gridwrap table tfoot.sum-row td.r,
/* B·∫£ng grouped (class .table) */
:host .gridwrap .table tfoot.sum-row td.r,
.blue { color: #1f6feb; font-weight: 600; }
.black { color: #0c0c0c; font-weight: 600; }
.sum-row td.black strong {
  color: #000 !important;
}
