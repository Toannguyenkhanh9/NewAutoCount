/* Buttons */

/* filter row */
.filter{padding:10px 12px;display:flex;align-items:center;justify-content:space-between;gap:10px;}
.filter input{height:34px;width:420px;max-width:100%;border:1px solid #d7deea;border-radius:8px;padding:0 10px;}
.meta{color:#6b7280;}

.r{text-align:right;}
.c{text-align:center;}
.tag{padding:2px 8px;border-radius:999px;border:1px solid #dbe5f8;background:#f7fbff;color:#0f2c61;font-weight:700;}
.tag.p{background:#ecfff5;border-color:#b6e7c8;color:#176a3a;}
.tag.o{background:#fffbed;border-color:#fbe2a2;color:#936b07;}
.tag.v{background:#fff5f5;border-color:#f2c6c6;color:#b42318;}

/* header form */
.hdr .row{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;}
label{display:flex;flex-direction:column;gap:6px;font-weight:600;color:#334155;}
label.wide{grid-column:1 / -1;}
input,select,textarea{border:1px solid #d7deea;border-radius:8px;padding:8px 10px;}

/* lines */
.lines{margin-top:8px;}
.lines-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;}
.lines-head .title{font-weight:800;color:#0f2c61;}
.tablewrap{border:1px solid #cfe0ff;border-radius:8px;overflow:auto; }
.lines table thead th{background:#f0f6ff;border-bottom:1px solid #d7e5ff;}
.lines table td input,.lines table td select{height:30px;padding:0 8px;}
.totals{margin-top:10px;display:flex;flex-direction:column;gap:6px;align-items:flex-end;}
.totals .row{display:flex;gap:24px;min-width:260px;justify-content:space-between;color:#0f2c61;}
.totals .row.grand{font-size:18px;font-weight:800;color:#0b3d0b;}

/* small grids */
.grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;}

/* preview */
.preview{margin-top:10px;border:1px solid #e5e7eb;border-radius:8px;padding:10px;}
.preview h3{margin:0 0 8px;}
.to-box{
  margin: 6px 0 12px;
  padding: 8px 10px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  background: #f9fafb;
}
.to-title{ font-weight:600; margin-bottom:6px; }
.to-text{ width:100%; border:0; background:transparent; resize:none; line-height:1.35; }
/* Sales A/C grid tidy spacing */
.lines table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

.lines table thead th,
.lines table tbody td {
  padding: 8px 10px;               /* tăng padding chung */
}

.lines table tbody td input {
  height: 34px;
  padding: 6px 10px;               /* input thoáng hơn */
  border-radius: 8px;
}

/* cột Amount rộng vừa, căn phải */
.lines table thead th:nth-child(4),
.lines table tbody td:nth-child(4) {
  width: 180px;
  text-align: right;
}

/* cột nút hành động – chừa khoảng mép phải, canh giữa */
.lines table thead th:last-child,
.lines table tbody td:last-child {
  width: 56px;                     /* đủ chỗ cho nút */
  padding-left: 8px;
  padding-right: 12px;             /* tránh dính mép phải */
  text-align: center;
}

/* nút delete gọn gàng */
.lines table .btn.danger {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 34px;
  padding: 0;
  border-radius: 10px;
}
.sum-row{
  display: flex;
  align-items: baseline;          /* chữ & số thẳng hàng đẹp */
  justify-content: flex-end;      /* canh phải (giống ảnh) */
  gap: 12px;
  margin: 6px 0;

  .label{ color:#334155; }
  .val{
    min-width: 120px;             /* cột số cố định, không nhảy */
    text-align: right;
    font-weight: 700;
  }
}
.inline-field{
  display:flex;
  gap:8px;
  align-items:center;
}
.inline-field .inp{ flex:1; }
.btn.icon{
  background-color: #959eaf;
  width:36px;height:36px;padding:0;
  display:inline-flex;align-items:center;justify-content:center;
  border-radius:8px;
}
/* List + Payment History layout */
.list-shell{
  display: flex;
  flex-direction: column;
  gap: 10px;
  /* chiều cao tổng khu list (trừ thanh tiêu đề/toolbar) */
  max-height: calc(100vh - 210px);
}

/* phần lưới chính chiếm hết phần còn lại và cuộn được */
.main-grid{
  flex: 1 1 auto;
  overflow: auto;
  border-radius: 8px;
}

/* panel Payment History có chiều cao ổn định */
.payment-panel{
  flex: 0 0 180px;          /* chiều cao: chỉnh nếu muốn */
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  background: #f9fafb;
  display: flex;
  flex-direction: column;
}
.payment-panel .pp-head{
  padding: 8px 12px;
  background: linear-gradient(180deg,#eef7ff 0%,#e6f0ff 100%);
  border-bottom: 1px solid #e1e7f0;
  border-radius: 8px 8px 0 0;
  font-weight: 600;
  color:#0f3b66;
    text-align: center;
}
.payment-panel .pp-body{
  padding: 8px 10px;
  overflow: auto;
}
.payment-panel table{
  width: 100%;
  border-collapse: collapse;
}
.payment-panel th, .payment-panel td{
  padding: 6px 8px;
  border-bottom: 1px dashed #e5e7eb;
}
.payment-panel .pp-empty{
  padding: 20px;
  text-align: center;
  color: #6b7280;
}
/* Dòng quá hạn (không đè màu selected) */
tbody tr.overdue:not(.selected) td {
  background: #ffe4e6;      /* hồng nhạt */
  color: #7f1d1d;           /* đỏ nâu dễ đọc */
}
tbody tr.overdue:not(.selected) td.r {
  font-weight: 600;
}

/* (tuỳ chọn) nhấn mạnh outstanding cột số khi quá hạn */
tbody tr.overdue:not(.selected) td:nth-last-child(2) { /* cột Outstanding nếu là cột áp chót */
  color: #b91c1c;
}
tr.overdue td {        /* tô cả dòng */
  color: #b91c1c;      /* đỏ */
  font-weight: 600;
}
td.neg {               /* nếu chỉ muốn mỗi ô Outstanding */
  color: #b91c1c;
  font-weight: 600;
}
input.invalid, select.invalid {
  border-color: #ef4444;
  box-shadow: 0 0 0 3px rgba(239,68,68,.15);
}
.err { color:#b91c1c; font-size:.85rem; margin-top:4px; }
.with-search { display:flex; gap:8px; align-items:center; }
.totals-grid {
  margin: 10px 0 16px;
  display: grid;
  grid-template-columns: 1fr auto; /* label | number */
  row-gap: 6px;
  align-items: baseline;

  .label {
    text-align: right;
    padding-right: 12px;
    color: #475569;
  }
  .value {
    min-width: 140px;
    text-align: right;
    font-weight: 600;
    color: #0f172a;
  }
  .value.warn {
    color: #b91c1c;
  }
  .knock-table .num,
  .knock-table td.r input,
  .pm-table td.r input {
    text-align: right;
  }
}

/* ===== Popup New / Edit A/R Invoice – giống style Contra ===== */

/* Body dùng flex: phần nội dung cuộn riêng, footer dính đáy */
.ac-dialog-body {
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 16px 18px 14px;
}

/* Vùng cuộn – chứa grid 3 cột, To box, Lines */
.ac-dialog-scroll {
  max-height: calc(100vh - 220px);  /* tương tự Contra */
  overflow: auto;
  padding-right: 4px;
  padding-bottom: 8px;
}

/* Footer luôn nằm dưới, không bị cuộn */
.ac-dialog-footer {
  margin-top: 8px;
  padding-top: 10px;
  border-top: 1px solid #e5e7eb;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ac-dialog-footer .spacer {
  flex: 1 1 auto;
}

